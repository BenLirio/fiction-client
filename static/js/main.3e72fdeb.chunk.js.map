{"version":3,"sources":["context/user-context.js","context/modal-context.js","apiConfig.js","hooks/useAuth.js","api/auth.js","Layout/Header/AuthHeader/AuthHeader.js","Layout/Header/GuestHeader/GuestHeader.js","Layout/Header/Header.js","hooks/useAjax.js","reducers/storysReducer.js","context/storys-context.js","hooks/useStorysApi.js","Layout/PermanentDrawer/PermanentDrawer.js","Layout/Layout.js","context/current-story-context.js","components/Page/usePageState.js","components/Page/useCustomElements.js","components/Page/useCustomLeaf.js","components/Page/usePageDoctorate.js","components/Page/usePageEvents.js","components/Page/withLayout.js","components/Page/Page.js","views/Story.js","hooks/useRandomName.js","views/Storys.js","views/NotFound.js","components/Modal/StyledModal/StyledModal.js","hooks/useInput.js","components/Modal/SignUpModal/SignUpModal.js","components/Modal/SignIn/SignIn.js","components/Modal/Modals.js","App.js","serviceWorker.js","theme.js","index.js"],"names":["userContext","React","createContext","token","setToken","modalContext","current","loading","close","apiUrls","apiUrl","window","location","hostname","useAuth","useContext","setLoading","setError","history","useHistory","signUp","credentials","axios","method","url","data","email","password","password_confirmation","passwordConfirmation","then","catch","signIn","user","localStorage","setItem","JSON","stringify","signOut","headers","Authorization","removeItem","push","AuthHeader","useState","anchorEl","setAnchorEl","handleClose","IconButton","color","onClick","event","currentTarget","Menu","open","Boolean","onClose","MenuItem","GuestHeader","Button","variant","useStyles","makeStyles","theme","root","display","appBar","zIndex","drawer","title","flexGrow","Header","classes","className","AppBar","Toolbar","Typography","useAjax","useCallback","Axios","storysReducer","state","action","id","payload","type","map","i","_id","text","parse","rest","filter","found","find","created","Error","initialStorysState","storysContext","storysContextDispatchProvider","useStorysApi","error","dispatch","ajax","index","a","async","res","storys","show","story","create","update","destroy","width","drawerWidth","drawerPaper","toolbar","mixins","PermanentDrawer","storysApi","Drawer","paper","List","ListItem","button","key","ListItemText","primary","listItem","Layout","children","currentStoryContext","CurrentStoryContextProvider","useParams","idUpdate","idDestroy","useEffect","Provider","value","usePageState","setValue","updateTimer","setTimeout","clearTimeout","useCustomElements","props","element","useCustomLeaf","leaf","style","attributes","usePageDoctorate","searches","node","path","ranges","forEach","search","Text","isText","parts","split","offset","part","anchor","length","focus","usePageEvents","editor","withLayout","normalizeNode","Node","child","childPath","Transforms","setNodes","at","background","palette","boxShadow","shadows","margin","padding","Page","useMemo","withReact","createEditor","renderElement","renderLeaf","decorate","onEvents","onChange","placeholder","onKeyDown","Story","generate","require","useRandomNameGenerator","spaced","Stroys","generator","onCreateStory","name","to","NotFound","position","left","top","height","backgroundColor","spacing","borderRadius","shape","transform","StyledModal","Modal","useInput","initialValue","e","target","SignUpModal","bindEmail","bindPassword","bindPasswordConfirmation","TextField","label","SignInModal","Modals","SignIn","App","exact","Storys","match","createMuiTheme","rootJsx","getItem","userState","pToken","setCurrent","modalState","modal","ThemeProvider","basename","useReducer","CssBaseline","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"yLAOMA,EAAcC,IAAMC,cALD,CACvBC,MAAO,KACPC,SAAU,eAuBGJ,I,2CCnBTK,EAAeJ,IAAMC,cAND,CACxBI,QAAS,GACTC,SAAS,EACTC,MAAO,eA4BMH,IChCTI,EACQ,oCADRA,EAES,wBASAC,EANkB,cAA7BC,OAAOC,SAASC,SACTJ,EAEAA,E,yBCgDIK,EAnDC,WAAO,IAAD,EACoBC,qBAAWV,GAA3CW,EADY,EACZA,WAAYR,EADA,EACAA,MAAOS,EADP,EACOA,SADP,EAEQF,qBAAWf,GAA/BG,EAFY,EAEZA,MAAOC,EAFK,EAELA,SACTc,EAAUC,cAChB,MAAO,CACLC,OAAQ,SAAAC,GACNL,GAAW,GACXC,GAAS,GCVO,SAAAI,GACpB,OAAOC,IAAM,CACXC,OAAQ,OACRC,IAAKd,EAAS,WACde,KAAM,CACJJ,YAAa,CACXK,MAAOL,EAAYK,MACnBC,SAAUN,EAAYM,SACtBC,sBAAuBP,EAAYQ,yBDGrCT,CAAOC,GACJS,MAAK,WACJd,GAAW,GACXR,OAEDuB,OAAM,WACLf,GAAW,GACXC,GAAS,OAGfe,OAAQ,SAAAX,GACNL,GAAW,GACXC,GAAS,GCTO,SAAAI,GACpB,OAAOC,IAAM,CACXE,IAAKd,EAAS,WACda,OAAQ,OACRE,KAAM,CACJJ,YAAa,CACXK,MAAOL,EAAYK,MACnBC,SAAUN,EAAYM,aDGxBK,CAAOX,GACJS,MAAK,YAAe,IAAZL,EAAW,EAAXA,KACPrB,EAASqB,EAAKQ,KAAK9B,OACnBa,GAAW,GACXkB,aAAaC,QAAQ,QAASC,KAAKC,UAAUZ,EAAKQ,KAAK9B,QACvDK,OAEDuB,OAAM,WACLf,GAAW,GACXC,GAAS,OAGfqB,QAAS,WACPtB,GAAW,GACXC,GAAS,GCXQ,SAAAd,GACrB,OAAOmB,IAAM,CACXE,IAAKd,EAAS,YACda,OAAQ,SACRgB,QAAS,CACPC,cAAc,UAAD,OAAYrC,MDOzBmC,CAAQnC,GACL2B,MAAK,WACJ1B,EAAS,MACTY,GAAW,GACXkB,aAAaO,WAAW,SACxBvB,EAAQwB,KAAK,QAEdX,OAAM,WACLf,GAAW,GACXC,GAAS,SEpBJ0B,EAzBI,WAAO,IAAD,EACS1C,IAAM2C,SAAS,MADxB,mBAChBC,EADgB,KACNC,EADM,KAEfR,EAAYxB,IAAZwB,QAMFS,EAAc,WAClBD,EAAY,OAGd,OACE,6BACE,kBAACE,EAAA,EAAD,CAAYC,MAAM,UAAUC,QAVZ,SAAAC,GAClBL,EAAYK,EAAMC,iBAUd,kBAAC,IAAD,OAEF,kBAACC,EAAA,EAAD,CAAMR,SAAUA,EAAUS,KAAMC,QAAQV,GAAWW,QAAST,GAC1D,kBAACU,EAAA,EAAD,CAAUP,QAASH,GAAnB,WACA,kBAACU,EAAA,EAAD,CAAUP,QAASH,GAAnB,cACA,kBAACU,EAAA,EAAD,CAAUP,QAASZ,GAAnB,a,SCJOoB,EAlBK,WAAO,IACjBJ,EAASvC,qBAAWV,GAApBiD,KACR,OACE,oCACE,kBAACK,EAAA,EAAD,CAAQV,MAAM,UAAUC,QAAS,kBAAMI,EAAK,YAA5C,SAGA,kBAACK,EAAA,EAAD,CACEV,MAAM,YACNW,QAAQ,YACRV,QAAS,kBAAMI,EAAK,YAHtB,oBCLAO,EAAYC,aAAW,SAAAC,GAAK,MAAK,CACrCC,KAAM,CACJC,QAAS,QAEXC,OAAQ,CACNC,OAAQJ,EAAMI,OAAOC,OAAS,GAEhCC,MAAO,CACLC,SAAU,OAwBCC,EApBA,WAAO,IACZpE,EAAUY,qBAAWf,GAArBG,MAEFqE,EAAUX,IAEhB,OACE,yBAAKY,UAAWD,EAAQR,MACtB,kBAACU,EAAA,EAAD,CAAQD,UAAWD,EAAQN,QACzB,kBAACS,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,CAAYhB,QAAQ,KAAKa,UAAWD,EAAQH,OAA5C,kBAGClE,EAAQ,kBAAC,EAAD,MAAiB,kBAAC,EAAD,QAG9B,kBAACwE,EAAA,EAAD,Q,oDCXSE,EAjBC,WAAO,IACb1E,EAAUY,qBAAWf,GAArBG,MACR,OAAO2E,uBACL,YAA8C,IAAD,IAA1CtD,WAA0C,MAApC,GAAoC,MAAhCD,cAAgC,MAAvB,MAAuB,MAAhBE,YAAgB,MAAT,GAAS,EAC3C,OAAOsD,IAAM,CACXvD,IAAI,GAAD,OAAKd,EAAL,YAAec,GAClBD,SACAgB,QAAS,CACPC,cAAe,UAAYrC,GAE7BsB,WAGJ,CAACtB,K,QC4BU6E,EA3CO,SAACC,EAAOC,GAAY,IAEpCC,EADIC,EAAYF,EAAZE,QAER,OAAQF,EAAOG,MAGb,IAAK,QACH,OAAOD,EAAQE,KAAI,SAAAC,GAAC,MAAK,CAAEJ,GAAII,EAAEC,IAAKC,KAAMrD,KAAKsD,MAAMH,EAAEE,UAE3D,IAAK,OACHN,EAAKC,EAAQI,IACb,IAAMG,EAAOV,EAAMW,QAAO,SAAAL,GAAC,OAAIA,EAAEJ,KAAOA,KAClCU,EAAQZ,EAAMa,MAAK,SAAAP,GAAC,OAAIA,EAAEJ,KAAOA,MAAO,GAG9C,OAFAU,EAAMJ,KAAOrD,KAAKsD,MAAMN,EAAQK,MAChCI,EAAMV,GAAKC,EAAQI,IACb,GAAN,mBAAWG,GAAX,CAAiBE,IAGnB,IAAK,SACH,IAAME,EAAU,CACdZ,GAAIC,EAAQI,IACZC,KAAMrD,KAAKsD,MAAMN,EAAQK,OAE3B,MAAM,GAAN,mBAAWR,GAAX,CAAkBc,IAGpB,IAAK,SACHZ,EAAKC,EAAQI,IACb,IAAMG,EAAOV,EAAMW,QAAO,SAAAL,GAAC,OAAIA,EAAEJ,KAAOA,KAClCU,EAAQZ,EAAMa,MAAK,SAAAP,GAAC,OAAIA,EAAEJ,KAAOA,KAEvC,OADAU,EAAMJ,KAAOrD,KAAKsD,MAAMN,EAAQK,MAC1B,GAAN,mBAAWE,GAAX,CAAiBE,IAEnB,IAAK,UAEH,OADAV,EAAKC,EAAQI,IACNP,EAAMW,QAAO,SAAAL,GAAC,OAAIA,EAAEJ,KAAOA,KAEpC,QACE,MAAM,IAAIa,QCtCVC,EAAqB,GAErBC,EAAgBjG,IAAMC,cAAc+F,GAC7BE,EAAgClG,IAAMC,cAAc,MAalDgG,ICkHAE,EA/HM,WAAM,MAEKxD,oBAAS,GAFd,mBAElBrC,EAFkB,KAETS,EAFS,OAGC4B,oBAAS,GAHV,mBAGlByD,EAHkB,KAGXpF,EAHW,KAKnBqF,EAAWvF,qBAAWoF,GAEtBI,EAAO1B,IA8Gb,MAAO,CACL2B,MA5GY1B,uBAAY,0BAAA2B,EAAAC,OAAA,uDACxBzF,GAAS,GACTD,GAAW,GAFa,oBAAAyF,EAAA,MAKVF,EAAK,CAAE/E,IAjBb,YAYgB,OAKtBmF,EALsB,OAOtBL,EAAS,CAAEjB,KAAM,QAASD,QAASuB,EAAIlF,KAAKmF,SAPtB,gDAUtB3F,GAAS,GAVa,QAYxBD,GAAW,GAZa,0DAavB,CAACuF,EAAMD,IAgGRO,KA7FW/B,uBACX,SAAMK,GAAN,eAAAsB,EAAAC,OAAA,uDACEzF,GAAS,GACTD,GAAW,GAFb,oBAAAyF,EAAA,MAKgBF,EAAK,CAAE/E,IAAI,GAAD,OAlClB,SAkCkB,YAAY2D,MALtC,OAKIwB,EALJ,OAOIL,EAAS,CAAEjB,KAAM,OAAQD,QAASuB,EAAIlF,KAAKqF,QAP/C,gDAUI7F,GAAS,GAVb,QAYED,GAAW,GAZb,0DAcA,CAACuF,EAAMD,IA+EPS,OA3EajC,uBACb,SAAMrD,GAAN,eAAAgF,EAAAC,OAAA,uDACEzF,GAAS,GACTD,GAAW,GAFb,oBAAAyF,EAAA,MAKgBF,EAAK,CACf/E,IAtDE,SAuDFD,OAAQ,OACRE,KAAM,CACJqF,MAAO,CACLrB,KAAMhE,OAVhB,OAKIkF,EALJ,OAeIL,EAAS,CAAEjB,KAAM,SAAUD,QAASuB,EAAIlF,KAAKqF,QAfjD,gDAkBI7F,GAAS,GAlBb,QAoBED,GAAW,GApBb,0DAsBA,CAACuF,EAAMD,IAqDPU,OAjDalC,uBACb,SAAOK,EAAI1D,GAAX,SAAAgF,EAAAC,OAAA,uDACEzF,GAAS,GACTD,GAAW,GAFb,oBAAAyF,EAAA,MAKgBF,EAAK,CACf/E,IAAI,GAAD,OAjFD,SAiFC,YAAY2D,GACf5D,OAAQ,QACRE,KAAM,CACJqF,MAAO,CACLrB,KAAMhE,OAVhB,8DAiBIR,GAAS,GAjBb,QAmBED,GAAW,GAnBb,0DAqBA,CAACuF,EAAMD,IA4BPW,QAxBcnC,uBACd,SAAMK,GAAN,SAAAsB,EAAAC,OAAA,uDACEzF,GAAS,GACTD,GAAW,GAFb,oBAAAyF,EAAA,MAIUF,EAAK,CACT/E,IAAI,GAAD,OA1GD,SA0GC,YAAY2D,GACf5D,OAAQ,YANd,OASI+E,EAAS,CAAEjB,KAAM,UAAWF,OAThC,gDAYIlE,GAAS,GAZb,QAcED,GAAW,GAdb,0DAgBA,CAACuF,EAAMD,IAQP/F,UACA8F,UCvHExC,EAAYC,aAAW,SAAAC,GAAK,MAAK,CACrCK,OAAQ,CACN8C,MAAOnD,EAAMoD,aAEfC,YAAa,CACXF,MAAOnD,EAAMoD,aAEfE,QAAStD,EAAMuD,OAAOD,YAqCTE,EAlCS,WACtB,IAAMC,EAAYpB,IACZlF,EAAUC,cAaVqD,EAAUX,IAChB,OACE,kBAAC4D,EAAA,EAAD,CACE7D,QAAQ,YACRa,UAAWD,EAAQJ,OACnBI,QAAS,CAAEkD,MAAOlD,EAAQ4C,cAE1B,yBAAK3C,UAAWD,EAAQ6C,UACxB,kBAACM,EAAA,EAAD,KACG,CAAC,YAAa,WAAWrC,KAAI,SAAAG,GAAI,OAChC,kBAACmC,EAAA,EAAD,CAAU1E,QAAS,kBAtBX,SAAAuC,GACd,OAAQA,GACN,IAAK,YACH+B,EAAUT,SACV,MACF,IAAK,UACH7F,EAAQwB,KAAK,YACb,MACF,QACE,MAAM,IAAIsD,OAaiB9C,CAAQuC,IAAOoC,QAAM,EAACC,IAAKrC,GAClD,kBAACsC,EAAA,EAAD,CAAcC,QAASvC,EAAMhB,UAAWD,EAAQyD,kBCzCtDpE,EAAYC,aAAW,SAAAC,GAAK,MAAK,CACrCC,KAAM,CACJC,QAAS,YAiBEiE,EAbA,SAAC,GAAkB,IAAhBC,EAAe,EAAfA,SACV3D,EAAUX,IAChB,OACE,oCACE,kBAAC,EAAD,MACA,yBAAKY,UAAWD,EAAQR,MACtB,kBAAC,EAAD,MACCmE,KCPHC,EAAsBnI,IAAMC,cAAc,IAKnCmI,EAA8B,SAAC,GAAkB,IAAhBF,EAAe,EAAfA,SAEpChD,EAAOmD,cAAPnD,GAFmD,EAQ1BiB,IAAzBS,EARmD,EAQnDA,KAAMtG,EAR6C,EAQ7CA,QAAS8F,EARoC,EAQpCA,MAGPkC,EAAanC,IAArBY,OACFA,EAASlC,uBACb,SAAArD,GACE8G,EAASpD,EAAI/C,KAAKC,UAAUZ,MAE9B,CAAC0D,IAEcqD,EAAcpC,IAAvBa,QACFA,EAAUnC,uBAAY,WAC1B0D,EAAUrD,KACT,CAACA,IAGJsD,qBAAU,WACR5B,EAAK1B,KACJ,CAACA,IACJ,IAAM2B,EAAQ/F,qBAAWmF,GAAeJ,MAAK,SAAAgB,GAAK,OAAIA,EAAM3B,KAAOA,KACnE,OAAI2B,EAEA,kBAACsB,EAAoBM,SAArB,CACEC,MAAO,CAAE7B,QAAOvG,UAAS8F,QAAOW,SAAQC,YAEvCkB,GAIE,MAIIC,I,iBCzCAQ,GAdM,WAAO,IAAD,EACC7H,qBAAWqH,GAA7BpB,EADiB,EACjBA,OAAQF,EADS,EACTA,MADS,EAEClE,mBAASkE,EAAMrB,MAFhB,mBAElBkD,EAFkB,KAEXE,EAFW,KAWzB,OARAJ,qBAAU,WACR,IAAMK,EAAcC,YAAW,WAC7B/B,EAAO2B,KACN,KACH,OAAO,WACLK,aAAaF,MAEd,CAACH,IACG,CAACA,EAAOE,ICLFI,GANW,WACxB,OAAO,SAAAC,GACL,OAAO,kBAACtE,EAAA,EAAD,eAAYhB,QAASsF,EAAMC,QAAQ9D,MAAU6D,MCQzCE,GAXO,WACpB,OAAO,SAAAF,GAAU,IAAD,EACgBA,EAAMG,KAA5BpG,aADM,MACE,UADF,EAEd,OACE,wCAAMqG,MAAO,CAAErG,MAAOA,IAAaiG,EAAMK,YACtCL,EAAMf,YC2CAqB,GA/CU,WACvB,IAAMC,EAAW,CACf,CAAC,MAAO,QACR,CAAC,MAAO,QACR,CAAC,MAAO,QACR,CAAC,MAAO,QACR,CAAC,MAAO,QACR,CAAC,MAAO,QACR,CAAC,MAAO,QACR,CAAC,MAAO,QACR,CAAC,MAAO,QACR,CAAC,MAAO,QACR,CAAC,MAAO,QACR,CAAC,MAAO,QACR,CAAC,MAAO,QACR,CAAC,MAAO,SA6BV,OA3BiB3E,uBACf,YAAmB,IAAD,mBAAhB4E,EAAgB,KAAVC,EAAU,KACVC,EAAS,GAqBf,OApBAH,EAASI,SAAQ,SAAAC,GACf,GAAIA,EAAO,IAAMC,KAAKC,OAAON,GAAO,CAAC,IAE7BO,EADWP,EAATjE,KACWyE,MAAMJ,EAAO,IAC5BK,EAAS,EAEbF,EAAMJ,SAAQ,SAACO,EAAM7E,GACT,IAANA,GACFqE,EAAOlH,KAAK,CACV2H,OAAQ,CAAEV,OAAMQ,OAAQA,EAASL,EAAO,GAAGQ,QAC3CC,MAAO,CAAEZ,OAAMQ,UACflH,MAAO6G,EAAO,KAIlBK,EAASA,EAASC,EAAKE,OAASR,EAAO,GAAGQ,cAKzCV,IAET,CAACH,KCpCUe,GAPO,WAIpB,OAHiB,SAACrH,EAAOsH,GACvB,OAAO,OCmBIC,GArBI,SAAAD,GAAW,IACpBE,EAAkBF,EAAlBE,cAkBR,OAbAF,EAAOE,cAAgB,YAAmB,IAAD,mBAAhBjB,EAAgB,KAAVC,EAAU,KACvC,GAAoB,IAAhBA,EAAKW,OAAc,CAAC,IAAD,uBACrB,YAAiCM,KAAKzC,SAASsC,EAAQd,GAAvD,+CAA8D,CAAC,IAAD,6BAAlDkB,EAAkD,KAA3CC,EAA2C,KACtDzF,EAAwB,IAAjByF,EAAU,GAAW,KAAO,QAErCD,EAAMxF,OAASA,GACjB0F,KAAWC,SAASP,EAAQ,CAAEpF,QAAQ,CAAE4F,GAAIH,KAL3B,mFASvB,OAAOH,EAAc,CAACjB,EAAMC,KAGvBc,GCVH5G,GAAYC,aAAW,SAAAC,GAAK,MAAK,CACrCC,KAAM,CACJkD,MAAO,IACPgE,WAAYnH,EAAMoH,QAAQD,WAAWxD,MACrC0D,UAAWrH,EAAMsH,QAAQ,GACzBC,OAAQ,cACRC,QAAS,QA6BEC,GAzBF,WACX,IAAMhH,EAAUX,KACV4G,EAASgB,mBAAQ,kBAAMC,aAAUhB,GAAWiB,mBAAkB,IAFnD,EAGS/C,KAHT,mBAGVD,EAHU,KAGHE,EAHG,KAIX+C,EAAgB3C,KAChB4C,EAAazC,KACb0C,EAAWtC,KACXuC,EAAWvB,KACjB,OACE,yBAAK/F,UAAWD,EAAQR,MACtB,6BACE,kBAAC,KAAD,CAAOyG,OAAQA,EAAQ9B,MAAOA,EAAOqD,SAAUnD,GAC7C,kBAAC,KAAD,CACEoD,YAAa,WACbL,cAAeA,EACfC,WAAYA,EACZC,SAAUA,EACVI,UAAW,SAAA/I,GAAK,OAAI4I,EAAS5I,EAAOsH,UClBjC0B,GAdD,WAAO,IAAD,EACSpL,qBAAWqH,GAA9B7H,EADU,EACVA,QACR,GAFkB,EACD8F,YAIV,IAAI9F,EAIT,OAAO,kBAAC,GAAD,MAET,OAAO,MCjBH6L,GAAWC,EAAQ,KAiBVC,GAfgB,WAa7B,OAZkB,WAChB,OAAOlK,KAAKC,UAAU,CACpB,CACEgD,KAAM,KACN8C,SAAU,CAAC,CAAE1C,KAAM2G,KAAWG,UAEhC,CACElH,KAAM,QACN8C,SAAU,CAAC,CAAE1C,KAAM,4C,SCiDZ+G,GArDA,WAGb,IAAM5F,EAAS7F,qBAAWmF,GAHP,EAKuBE,IAAlCI,EALW,EAKXA,MAAOO,EALI,EAKJA,OAAQxG,EALJ,EAKIA,QAAS8F,EALb,EAKaA,MAC1BoG,EAAYH,KAIlB7D,qBAAU,WACRjC,MACC,CAACA,IAGJ,IAAMkG,EAAgB5H,uBAAY,WAChC,IAAM6H,EAAOF,IACb1F,EAAO4F,KACN,IAEH,GAAItG,EAGF,OAAO,oCACF,GAAI9F,EAGT,OAAO,yCACF,GAAIqG,EAET,OACE,oCACE,2BAAIA,EAAO0D,QAAU,cACrB,kBAAC3G,EAAA,EAAD,CAAQT,QAASwJ,GAAjB,gBACA,4BACG9F,EAAOtB,KAAI,SAAAwB,GACV,OACE,wBAAIgB,IAAKhB,EAAM3B,IACb,kBAAC,KAAD,CAAMyH,GAAE,kBAAa9F,EAAM3B,KACxB2B,EAAMrB,KAAK,GAAG0C,SAAS,GAAG1C,MAAQ,iBAUjD,MAAM,IAAIO,OClDC6G,GAJE,WACf,OAAO,+C,UCCHhJ,GAAYC,aAAW,SAAAC,GAAK,MAAK,CACrC2D,MAAO,CACLoF,SAAU,WACVC,KAAM,MACNC,IAAK,MACL9F,MAAO,IACP+F,OAAQ,IACRC,gBAAiBnJ,EAAMoH,QAAQD,WAAWxD,MAC1C0D,UAAWrH,EAAMsH,QAAQ,GACzBE,QAASxH,EAAMoJ,QAAQ,EAAG,EAAG,GAC7BC,aAAcrJ,EAAMsJ,MAAMD,aAC1BE,UAAW,6BAyBAC,GArBK,SAAC,GAAwB,IAAtBZ,EAAqB,EAArBA,KAAMxE,EAAe,EAAfA,SAAe,EACuBpH,qBAC/DV,GADMC,EADkC,EAClCA,QAASE,EADyB,EACzBA,MAAOD,EADkB,EAClBA,QAASS,EADS,EACTA,WAAYqF,EADH,EACGA,MAAOpF,EADV,EACUA,SAG9CuD,EAAUX,KAMhB,OACE,kBAAC2J,GAAA,EAAD,CAAOlK,KAAMhD,IAAYqM,EAAMnJ,QANd,WACjBvC,GAAS,GACTD,GAAW,GACXR,MAIE,yBAAKiE,UAAWD,EAAQkD,OACtB,2BAAInH,GAAW,cACf,2BAAI8F,GAAS,iBACZ8B,K,UCvBMsF,GATS,SAAAC,GAAiB,IAAD,EACZ9K,mBAAS8K,GADG,mBAC/B/E,EAD+B,KACxBE,EADwB,KAOtC,MAAO,CAACF,EALK,CACXA,QACAqD,SAAU,SAAA2B,GAAC,OAAI9E,EAAS8E,EAAEC,OAAOjF,SAErB,kBAAME,EAAS,OCqBhBgF,GAvBK,WAAO,IACjBzM,EAAWN,IAAXM,OADgB,EAEGqM,GAAS,IAFZ,mBAEjB/L,EAFiB,KAEVoM,EAFU,OAGSL,GAAS,IAHlB,mBAGjB9L,EAHiB,KAGPoM,EAHO,OAIiCN,GAAS,IAJ1C,mBAIjB5L,EAJiB,KAIKmM,EAJL,KAQxB,OACE,kBAAC,GAAD,CAAarB,KAAK,UAChB,8BACE,kBAACsB,GAAA,EAAD,eAAWC,MAAM,SAAYJ,IAC7B,kBAACG,GAAA,EAAD,eAAWC,MAAM,YAAeH,IAChC,kBAACE,GAAA,EAAD,eACEC,MAAM,yBACFF,IAEN,kBAACrK,EAAA,EAAD,CAAQT,QAZU,WACtB9B,EAAO,CAAEM,QAAOC,WAAUE,2BAWtB,YCCOsM,GAlBK,WAAO,IAAD,EACGV,GAAS,IADZ,mBACjB/L,EADiB,KACVoM,EADU,OAESL,GAAS,IAFlB,mBAEjB9L,EAFiB,KAEPoM,EAFO,KAGhB/L,EAAWlB,IAAXkB,OAIR,OACE,kBAAC,GAAD,CAAa2K,KAAK,UAChB,8BACE,kBAACsB,GAAA,EAAD,eAAWC,MAAM,SAAYJ,IAC7B,kBAACG,GAAA,EAAD,eAAWC,MAAM,YAAeH,IAChC,kBAACpK,EAAA,EAAD,CAAQT,QARU,WACtBlB,EAAO,CAAEN,QAAOC,eAOZ,YCLOyM,GATA,WACb,OACE,oCACE,kBAAC,GAAD,MACA,kBAACC,GAAD,QCsBSC,GArBH,WACV,OACE,kBAAC,EAAD,KACE,kBAAC,GAAD,MACA,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAO3E,KAAK,QACV,kBAAC,GAAD,OAEF,kBAAC,IAAD,CAAO4E,OAAK,EAAC5E,KAAK,YAChB,kBAAC6E,GAAD,OAEF,kBAAC,IAAD,CAAO7E,KAAK,gBACV,kBAAC,EAAD,KACE,kBAAC,GAAD,WCVQpG,QACW,cAA7B5C,OAAOC,SAASC,UAEe,UAA7BF,OAAOC,SAASC,UAEhBF,OAAOC,SAASC,SAAS4N,MACvB,2D,iCChBSC,gBAAe,CAC5BvH,YAAa,MCUTwH,GACJ,mBlCLiC,SAAC,GAAkB,IAAhBxG,EAAe,EAAfA,SAAe,EACzBvF,mBACxBR,KAAKsD,MAAMxD,aAAa0M,QAAQ,WAAa,MAFI,mBAC5CzO,EAD4C,KACrCC,EADqC,KAQ7CyO,EAAY,CAChB1O,QACAC,SALuB0E,uBAAY,SAAAgK,GACnC1O,EAAS0O,KACR,KAMH,OACE,kBAAC9O,EAAY0I,SAAb,CAAsBC,MAAOkG,GAAY1G,KkCT3C,KACE,mBjCLgC,SAAC,GAAkB,IAAhBA,EAAe,EAAfA,SAAe,EACtBvF,mBAAS,QADa,mBAC7CtC,EAD6C,KACpCyO,EADoC,OAEtBnM,oBAAS,GAFa,mBAE7CrC,EAF6C,KAEpCS,EAFoC,OAG1B4B,oBAAS,GAHiB,mBAI9CoM,EAAa,CACjB1O,UACAC,UACAS,aACAqF,MARkD,KASlDpF,SATkD,KAUlDT,MAAO,WACLuO,EAAW,SAEbzL,KAAM,SAAA2L,GACJF,EAAWE,KAIf,OACE,kBAAC5O,EAAaqI,SAAd,CAAuBC,MAAOqG,GAAa7G,KiCd3C,KACE,kBAAC+G,GAAA,EAAD,CAAenL,MAAOA,IACpB,kBAAC,KAAD,CAAeoL,SAAS,oBACtB,mBxBV2B,SAAC,GAAkB,IAAhBhH,EAAe,EAAfA,SAAe,EAC1BiH,qBAAWpK,EAAeiB,GADA,mBAC9CW,EAD8C,KACtCN,EADsC,KAErD,OACE,kBAACJ,EAAcwC,SAAf,CAAwBC,MAAO/B,GAC7B,kBAACT,EAA8BuC,SAA/B,CAAwCC,MAAOrC,GAC5C6B,MwBKC,KACE,kBAACkH,GAAA,EAAD,MACA,kBAAC,GAAD,WAQZC,IAASC,OAAOZ,GAASa,SAASC,eAAe,SFuG3C,kBAAmBC,WACrBA,UAAUC,cAAcC,MAAM9N,MAAK,SAAA+N,GACjCA,EAAaC,iB","file":"static/js/main.3e72fdeb.chunk.js","sourcesContent":["import React, { useState, useCallback } from 'react'\n\nconst initialUserState = {\n  token: null,\n  setToken: () => {}\n}\n\nconst userContext = React.createContext(initialUserState)\n\nexport const UserContextProvider = ({ children }) => {\n  const [token, setToken] = useState(\n    JSON.parse(localStorage.getItem('token')) || null\n  )\n\n  const setTokenCallback = useCallback(pToken => {\n    setToken(pToken)\n  }, [])\n  const userState = {\n    token,\n    setToken: setTokenCallback\n  }\n\n  return (\n    <userContext.Provider value={userState}>{children}</userContext.Provider>\n  )\n}\n\nexport default userContext\n","import React, { useState } from 'react'\n\nconst initialModalState = {\n  current: '',\n  loading: false,\n  close: () => {}\n}\n\nconst modalContext = React.createContext(initialModalState)\n\nexport const ModalContextProvider = ({ children }) => {\n  const [current, setCurrent] = useState('none')\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState(false)\n  const modalState = {\n    current,\n    loading,\n    setLoading,\n    error,\n    setError,\n    close: () => {\n      setCurrent('none')\n    },\n    open: modal => {\n      setCurrent(modal)\n    }\n  }\n\n  return (\n    <modalContext.Provider value={modalState}>{children}</modalContext.Provider>\n  )\n}\n\nexport default modalContext\n","let apiUrl\nconst apiUrls = {\n  production: 'https://fiction-api.herokuapp.com',\n  development: 'http://localhost:4741'\n}\n\nif (window.location.hostname === 'localhost') {\n  apiUrl = apiUrls.development\n} else {\n  apiUrl = apiUrls.production\n}\n\nexport default apiUrl\n","import { useContext } from 'react'\nimport modalContext from '../context/modal-context'\nimport { signIn, signUp, signOut } from '../api/auth'\nimport userContext from '../context/user-context'\nimport { useHistory } from 'react-router-dom'\n\nconst useAuth = () => {\n  const { setLoading, close, setError } = useContext(modalContext)\n  const { token, setToken } = useContext(userContext)\n  const history = useHistory()\n  return {\n    signUp: credentials => {\n      setLoading(true)\n      setError(false)\n      signUp(credentials)\n        .then(() => {\n          setLoading(false)\n          close()\n        })\n        .catch(() => {\n          setLoading(false)\n          setError(true)\n        })\n    },\n    signIn: credentials => {\n      setLoading(true)\n      setError(false)\n      signIn(credentials)\n        .then(({ data }) => {\n          setToken(data.user.token)\n          setLoading(false)\n          localStorage.setItem('token', JSON.stringify(data.user.token))\n          close()\n        })\n        .catch(() => {\n          setLoading(false)\n          setError(true)\n        })\n    },\n    signOut: () => {\n      setLoading(true)\n      setError(false)\n      signOut(token)\n        .then(() => {\n          setToken(null)\n          setLoading(false)\n          localStorage.removeItem('token')\n          history.push('/')\n        })\n        .catch(() => {\n          setLoading(false)\n          setError(true)\n        })\n    }\n  }\n}\n\nexport default useAuth\n","import apiUrl from '../apiConfig'\nimport axios from 'axios'\n\nexport const signUp = credentials => {\n  return axios({\n    method: 'POST',\n    url: apiUrl + '/sign-up',\n    data: {\n      credentials: {\n        email: credentials.email,\n        password: credentials.password,\n        password_confirmation: credentials.passwordConfirmation\n      }\n    }\n  })\n}\n\nexport const signIn = credentials => {\n  return axios({\n    url: apiUrl + '/sign-in',\n    method: 'POST',\n    data: {\n      credentials: {\n        email: credentials.email,\n        password: credentials.password\n      }\n    }\n  })\n}\n\nexport const signOut = token => {\n  return axios({\n    url: apiUrl + '/sign-out',\n    method: 'DELETE',\n    headers: {\n      Authorization: `Bearer ${token}`\n    }\n  })\n}\n\nexport const changePassword = (passwords, user) => {\n  return axios({\n    url: apiUrl + '/change-password',\n    method: 'PATCH',\n    headers: {\n      Authorization: `Token token=${user.token}`\n    },\n    data: {\n      passwords: {\n        old: passwords.oldPassword,\n        new: passwords.newPassword\n      }\n    }\n  })\n}\n","import React from 'react'\nimport { IconButton, Menu } from '@material-ui/core'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport AccountCircle from '@material-ui/icons/AccountCircle'\nimport useAuth from '../../../hooks/useAuth'\n\nconst AuthHeader = () => {\n  const [anchorEl, setAnchorEl] = React.useState(null)\n  const { signOut } = useAuth()\n\n  const handleClick = event => {\n    setAnchorEl(event.currentTarget)\n  }\n\n  const handleClose = () => {\n    setAnchorEl(null)\n  }\n\n  return (\n    <div>\n      <IconButton color=\"inherit\" onClick={handleClick}>\n        <AccountCircle />\n      </IconButton>\n      <Menu anchorEl={anchorEl} open={Boolean(anchorEl)} onClose={handleClose}>\n        <MenuItem onClick={handleClose}>Profile</MenuItem>\n        <MenuItem onClick={handleClose}>My account</MenuItem>\n        <MenuItem onClick={signOut}>Logout</MenuItem>\n      </Menu>\n    </div>\n  )\n}\nexport default AuthHeader\n","import React, { useContext } from 'react'\nimport { Button } from '@material-ui/core'\nimport modalContext from '../../../context/modal-context'\n\nconst GuestHeader = () => {\n  const { open } = useContext(modalContext)\n  return (\n    <>\n      <Button color=\"inherit\" onClick={() => open('SignIn')}>\n        Login\n      </Button>\n      <Button\n        color=\"secondary\"\n        variant=\"contained\"\n        onClick={() => open('SignUp')}\n      >\n        Create Account\n      </Button>\n    </>\n  )\n}\n\nexport default GuestHeader\n","import React, { useContext } from 'react'\nimport { AppBar, Toolbar, makeStyles, Typography } from '@material-ui/core'\nimport userContext from '../../context/user-context'\nimport AuthHeader from './AuthHeader/AuthHeader'\nimport GuestHeader from './GuestHeader/GuestHeader'\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: 'flex'\n  },\n  appBar: {\n    zIndex: theme.zIndex.drawer + 1\n  },\n  title: {\n    flexGrow: 1\n  }\n}))\n\nconst Header = () => {\n  const { token } = useContext(userContext)\n\n  const classes = useStyles()\n\n  return (\n    <div className={classes.root}>\n      <AppBar className={classes.appBar}>\n        <Toolbar>\n          <Typography variant=\"h5\" className={classes.title}>\n            Fiction Writer\n          </Typography>\n          {token ? <AuthHeader /> : <GuestHeader />}\n        </Toolbar>\n      </AppBar>\n      <Toolbar />\n    </div>\n  )\n}\n\nexport default Header\n","import { useContext, useCallback } from 'react'\nimport userContext from '../context/user-context'\nimport apiUrl from '../apiConfig'\nimport Axios from 'axios'\n\nconst useAjax = () => {\n  const { token } = useContext(userContext)\n  return useCallback(\n    ({ url = '', method = 'GET', data = {} }) => {\n      return Axios({\n        url: `${apiUrl}/${url}`,\n        method,\n        headers: {\n          Authorization: 'Bearer ' + token\n        },\n        data\n      })\n    },\n    [token]\n  )\n}\n\nexport default useAjax\n","// This function is read only\n// If you want to write to the state please refer to\n// use story api.js\nconst storysReducer = (state, action) => {\n  const { payload } = action\n  let id\n  switch (action.type) {\n    // Index takes in an array and sets all state to the array\n    // first mapping over the items and only getting data and id\n    case 'index': {\n      return payload.map(i => ({ id: i._id, text: JSON.parse(i.text) }))\n    }\n    case 'show': {\n      id = payload._id\n      const rest = state.filter(i => i.id !== id)\n      const found = state.find(i => i.id === id) || {}\n      found.text = JSON.parse(payload.text)\n      found.id = payload._id\n      return [...rest, found]\n    }\n    // create takes maps the object and adds it at the end of the array\n    case 'create': {\n      const created = {\n        id: payload._id,\n        text: JSON.parse(payload.text)\n      }\n      return [...state, created]\n    }\n    // Update takes in an id and data\n    case 'update': {\n      id = payload._id\n      const rest = state.filter(i => i.id !== id)\n      const found = state.find(i => i.id === id)\n      found.text = JSON.parse(payload.text)\n      return [...rest, found]\n    }\n    case 'destroy': {\n      id = payload._id\n      return state.filter(i => i.id !== id)\n    }\n    default: {\n      throw new Error()\n    }\n  }\n}\n\nexport default storysReducer\n","import React, { useReducer } from 'react'\nimport storysReducer from '../reducers/storysReducer'\n\nconst initialStorysState = []\n\nconst storysContext = React.createContext(initialStorysState)\nexport const storysContextDispatchProvider = React.createContext(null)\n\nexport const StorysContextProvider = ({ children }) => {\n  const [storys, dispatch] = useReducer(storysReducer, initialStorysState)\n  return (\n    <storysContext.Provider value={storys}>\n      <storysContextDispatchProvider.Provider value={dispatch}>\n        {children}\n      </storysContextDispatchProvider.Provider>\n    </storysContext.Provider>\n  )\n}\n\nexport default storysContext\n","import useAjax from './useAjax'\nimport { useCallback, useContext, useState } from 'react'\nimport { storysContextDispatchProvider } from '../context/storys-context'\n\nconst url = 'storys'\n\nconst useStorysApi = () => {\n  // Let user have access to the status\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState(false)\n  // Allow server api to dispatch to the context\n  const dispatch = useContext(storysContextDispatchProvider)\n  // Requests should use the ajax format\n  const ajax = useAjax()\n\n  // INDEX\n  const index = useCallback(async () => {\n    setError(false)\n    setLoading(true)\n    let res\n    try {\n      res = await ajax({ url })\n      // Successfully indexed, set the storys state\n      dispatch({ type: 'index', payload: res.data.storys })\n    } catch (error) {\n      // Failed to index\n      setError(true)\n    }\n    setLoading(false)\n  }, [ajax, dispatch])\n\n  // SHOW\n  const show = useCallback(\n    async id => {\n      setError(false)\n      setLoading(true)\n      let res\n      try {\n        res = await ajax({ url: `${url}/${id}` })\n        // Successfully found story, add it to state\n        dispatch({ type: 'show', payload: res.data.story })\n      } catch (error) {\n        // Failed to show\n        setError(true)\n      }\n      setLoading(false)\n    },\n    [ajax, dispatch]\n  )\n\n  // CREATE\n  const create = useCallback(\n    async data => {\n      setError(false)\n      setLoading(true)\n      let res\n      try {\n        res = await ajax({\n          url,\n          method: 'POST',\n          data: {\n            story: {\n              text: data\n            }\n          }\n        })\n        // Created story\n        dispatch({ type: 'create', payload: res.data.story })\n      } catch (error) {\n        // Failed to create story\n        setError(true)\n      }\n      setLoading(false)\n    },\n    [ajax, dispatch]\n  )\n\n  // PATCH\n  const update = useCallback(\n    async (id, data) => {\n      setError(false)\n      setLoading(true)\n      let res\n      try {\n        res = await ajax({\n          url: `${url}/${id}`,\n          method: 'PATCH',\n          data: {\n            story: {\n              text: data\n            }\n          }\n        })\n        // Updated a story\n      } catch (error) {\n        // Failed to update story\n        setError(true)\n      }\n      setLoading(false)\n    },\n    [ajax, dispatch]\n  )\n\n  // DELETE\n  const destroy = useCallback(\n    async id => {\n      setError(false)\n      setLoading(true)\n      try {\n        await ajax({\n          url: `${url}/${id}`,\n          method: 'DELETE'\n        })\n        // Successfully Deleted a story\n        dispatch({ type: 'destroy', id })\n      } catch (error) {\n        // Failed to delete a story\n        setError(true)\n      }\n      setLoading(false)\n    },\n    [ajax, dispatch]\n  )\n  return {\n    index,\n    show,\n    create,\n    update,\n    destroy,\n    loading,\n    error\n  }\n}\nexport default useStorysApi\n","import React from 'react'\nimport {\n  Drawer,\n  List,\n  ListItem,\n  ListItemText,\n  makeStyles\n} from '@material-ui/core'\nimport { useHistory } from 'react-router-dom'\nimport useStorysApi from '../../hooks/useStorysApi'\n\nconst useStyles = makeStyles(theme => ({\n  drawer: {\n    width: theme.drawerWidth\n  },\n  drawerPaper: {\n    width: theme.drawerWidth\n  },\n  toolbar: theme.mixins.toolbar\n}))\n\nconst PermanentDrawer = () => {\n  const storysApi = useStorysApi()\n  const history = useHistory()\n  const onClick = text => {\n    switch (text) {\n      case 'New Story':\n        storysApi.create()\n        break\n      case 'Stories':\n        history.push('/stories')\n        break\n      default:\n        throw new Error()\n    }\n  }\n  const classes = useStyles()\n  return (\n    <Drawer\n      variant=\"permanent\"\n      className={classes.drawer}\n      classes={{ paper: classes.drawerPaper }}\n    >\n      <div className={classes.toolbar} />\n      <List>\n        {['New Story', 'Stories'].map(text => (\n          <ListItem onClick={() => onClick(text)} button key={text}>\n            <ListItemText primary={text} className={classes.listItem} />\n          </ListItem>\n        ))}\n      </List>\n    </Drawer>\n  )\n}\n\nexport default PermanentDrawer\n","import React from 'react'\nimport Header from './Header/Header'\nimport { makeStyles } from '@material-ui/core'\n\nimport PermanentDrawer from './PermanentDrawer/PermanentDrawer'\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: 'flex'\n  }\n}))\n\nconst Layout = ({ children }) => {\n  const classes = useStyles()\n  return (\n    <>\n      <Header />\n      <div className={classes.root}>\n        <PermanentDrawer />\n        {children}\n      </div>\n    </>\n  )\n}\n\nexport default Layout\n","import React, {\n  useState,\n  useContext,\n  useEffect,\n  useCallback,\n  useReducer\n} from 'react'\nimport storysContext from './storys-context'\nimport { useParams } from 'react-router-dom'\nimport useStorysApi from '../hooks/useStorysApi'\nimport storysReducer from '../reducers/storysReducer'\n\nconst currentStoryContext = React.createContext({})\n\n// This context is a bit complex and confusing but it works for now\n// FIX latter\n// Have to fix this function now\nexport const CurrentStoryContextProvider = ({ children }) => {\n  // This will not change unless the user changes pages\n  const { id } = useParams()\n\n  // show relies on ajax and dispatch\n  // dispatch is set, and I think ajax is as well\n  // NEED to call multiple times so that loading and error are\n  // bound to the right objects\n  const { show, loading, error } = useStorysApi()\n\n  // This is to bind the id to the context for update and destroy\n  const { update: idUpdate } = useStorysApi()\n  const update = useCallback(\n    data => {\n      idUpdate(id, JSON.stringify(data))\n    },\n    [id]\n  )\n  const { destroy: idDestroy } = useStorysApi()\n  const destroy = useCallback(() => {\n    idDestroy(id)\n  }, [id])\n\n  // only run if the id changes\n  useEffect(() => {\n    show(id)\n  }, [id])\n  const story = useContext(storysContext).find(story => story.id === id)\n  if (story) {\n    return (\n      <currentStoryContext.Provider\n        value={{ story, loading, error, update, destroy }}\n      >\n        {children}\n      </currentStoryContext.Provider>\n    )\n  } else {\n    return null\n  }\n}\n\nexport default currentStoryContext\n","import React, { useContext, useState, useEffect } from 'react'\nimport currentStoryContext from '../../context/current-story-context'\n\nconst usePageState = () => {\n  const { update, story } = useContext(currentStoryContext)\n  const [value, setValue] = useState(story.text)\n  useEffect(() => {\n    const updateTimer = setTimeout(() => {\n      update(value)\n    }, 1000)\n    return () => {\n      clearTimeout(updateTimer)\n    }\n  }, [value])\n  return [value, setValue]\n}\n\nexport default usePageState\n","import React from 'react'\nimport { Typography } from '@material-ui/core'\n\nconst useCustomElements = () => {\n  return props => {\n    return <Typography variant={props.element.type} {...props} />\n  }\n}\n\nexport default useCustomElements\n","import React from 'react'\n\nconst useCustomLeaf = () => {\n  return props => {\n    const { color = 'inherit' } = props.leaf\n    return (\n      <span style={{ color: color }} {...props.attributes}>\n        {props.children}\n      </span>\n    )\n  }\n}\n\nexport default useCustomLeaf\n","import React, { useCallback } from 'react'\nimport { Text } from 'slate'\n\nconst usePageDoctorate = () => {\n  const searches = [\n    ['the', '#faa'],\n    ['eht', '#afa'],\n    ['the', '#faa'],\n    ['eht', '#afa'],\n    ['the', '#faa'],\n    ['eht', '#afa'],\n    ['the', '#faa'],\n    ['eht', '#afa'],\n    ['the', '#faa'],\n    ['eht', '#afa'],\n    ['the', '#faa'],\n    ['eht', '#afa'],\n    ['the', '#faa'],\n    ['eht', '#afa']\n  ]\n  const decorate = useCallback(\n    ([node, path]) => {\n      const ranges = []\n      searches.forEach(search => {\n        if (search[0] && Text.isText(node)) {\n          const { text } = node\n          const parts = text.split(search[0])\n          let offset = 0\n\n          parts.forEach((part, i) => {\n            if (i !== 0) {\n              ranges.push({\n                anchor: { path, offset: offset - search[0].length },\n                focus: { path, offset },\n                color: search[1]\n              })\n            }\n\n            offset = offset + part.length + search[0].length\n          })\n        }\n      })\n\n      return ranges\n    },\n    [searches]\n  )\n  return decorate\n}\n\nexport default usePageDoctorate\n\n// onKeyDown={e => {\n//   if (e.key === '&') {\n//     e.preventDefault()\n//     Transforms.setNodes(\n//       editor,\n//       { color: '#7a7' },\n//       // Apply it to text nodes, and split the text node up if the\n//       // selection is overlapping only part of it.\n//       { match: n => Text.isText(n), split: true }\n//     )\n//   }\n// }}\n","import React from 'react'\n\nconst usePageEvents = () => {\n  const onEvents = (event, editor) => {\n    return null\n  }\n  return onEvents\n}\n\nexport default usePageEvents\n","import { Transforms, Node } from 'slate'\n\nconst withLayout = editor => {\n  const { normalizeNode } = editor\n\n  // From docs. Basically what this does is\n  // picks the first line and makes it a h4 tag,\n  // Next it picks all the other lines and makes them body text\n  editor.normalizeNode = ([node, path]) => {\n    if (path.length === 0) {\n      for (const [child, childPath] of Node.children(editor, path)) {\n        const type = childPath[0] === 0 ? 'h4' : 'body1'\n\n        if (child.type !== type) {\n          Transforms.setNodes(editor, { type }, { at: childPath })\n        }\n      }\n    }\n    return normalizeNode([node, path])\n  }\n\n  return editor\n}\nexport default withLayout\n","import React, { useMemo } from 'react'\nimport { makeStyles } from '@material-ui/core'\nimport { Slate, Editable, withReact } from 'slate-react'\nimport { createEditor } from 'slate'\nimport usePageState from './usePageState'\nimport useCustomElements from './useCustomElements'\nimport useCustomLeaf from './useCustomLeaf'\nimport usePageDoctorate from './usePageDoctorate'\nimport usePageEvents from './usePageEvents'\nimport withLayout from './withLayout'\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    width: 400,\n    background: theme.palette.background.paper,\n    boxShadow: theme.shadows[3],\n    margin: '20px auto 0',\n    padding: 20\n  }\n}))\n\nconst Page = () => {\n  const classes = useStyles()\n  const editor = useMemo(() => withReact(withLayout(createEditor())), [])\n  const [value, setValue] = usePageState()\n  const renderElement = useCustomElements()\n  const renderLeaf = useCustomLeaf()\n  const decorate = usePageDoctorate()\n  const onEvents = usePageEvents()\n  return (\n    <div className={classes.root}>\n      <div>\n        <Slate editor={editor} value={value} onChange={setValue}>\n          <Editable\n            placeholder={'Title...'}\n            renderElement={renderElement}\n            renderLeaf={renderLeaf}\n            decorate={decorate}\n            onKeyDown={event => onEvents(event, editor)}\n          />\n        </Slate>\n      </div>\n    </div>\n  )\n}\n\nexport default Page\n","import React, { useContext, useMemo } from 'react'\nimport currentStoryContext from '../context/current-story-context'\nimport userContext from '../context/user-context'\nimport useStorysApi from '../hooks/useStorysApi'\nimport Page from '../components/Page/Page'\n\nconst Story = () => {\n  const { loading, error } = useContext(currentStoryContext)\n  if (error) {\n    // There was an auth error most likely\n    // go back to home\n  } else if (loading) {\n    // Loading the story\n  } else {\n    // Everting should be good\n    return <Page />\n  }\n  return null\n}\n\nexport default Story\n","const generate = require('project-name-generator')\n\nconst useRandomNameGenerator = () => {\n  const generator = () => {\n    return JSON.stringify([\n      {\n        type: 'h4',\n        children: [{ text: generate().spaced }]\n      },\n      {\n        type: 'body1',\n        children: [{ text: 'Write your fantastic story here...' }]\n      }\n    ])\n  }\n  return generator\n}\nexport default useRandomNameGenerator\n","import React, { useContext, useEffect, useCallback } from 'react'\nimport useStorysApi from '../hooks/useStorysApi'\nimport storysContext from '../context/storys-context'\nimport { Button } from '@material-ui/core'\nimport useRandomNameGenerator from '../hooks/useRandomName'\nimport { Link } from 'react-router-dom'\n\nconst Stroys = () => {\n  // Reference all of the stories here, starts as [] but\n  // once index happens the array fills up\n  const storys = useContext(storysContext)\n  // give this page access to call an index and display state of request\n  const { index, create, loading, error } = useStorysApi()\n  const generator = useRandomNameGenerator()\n\n  // Index should only change if user token changes,\n  // Only re index when the user signs in again.\n  useEffect(() => {\n    index()\n  }, [index])\n\n  // When the user click create a story\n  const onCreateStory = useCallback(() => {\n    const name = generator()\n    create(name)\n  }, [])\n\n  if (error) {\n    // Failed to index the stories\n    // most likely signed out or connection issue\n    return <p>error</p>\n  } else if (loading) {\n    // stories are loading should only briefly show,\n    // Show some sort of indicator to the user\n    return <p>loading...</p>\n  } else if (storys) {\n    // Neither error or loading, which means stories should have loaded\n    return (\n      <>\n        <p>{storys.length || 'no stories'}</p>\n        <Button onClick={onCreateStory}>Create story</Button>\n        <ul>\n          {storys.map(story => {\n            return (\n              <li key={story.id}>\n                <Link to={`stories/${story.id}`}>\n                  {story.text[0].children[0].text || 'no data'}\n                </Link>\n              </li>\n            )\n          })}\n        </ul>\n      </>\n    )\n  } else {\n    // Should not get to this point so if so something has gone wrong\n    throw new Error()\n  }\n}\n\nexport default Stroys\n","import React from 'react'\n\nconst NotFound = () => {\n  return <div>404 not found</div>\n}\n\nexport default NotFound\n","import React, { useContext } from 'react'\nimport { Modal, makeStyles, Fade, Grow } from '@material-ui/core'\nimport modalContext from '../../../context/modal-context'\n\nconst useStyles = makeStyles(theme => ({\n  paper: {\n    position: 'absolute',\n    left: '50%',\n    top: '50%',\n    width: 400,\n    height: 400,\n    backgroundColor: theme.palette.background.paper,\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3),\n    borderRadius: theme.shape.borderRadius,\n    transform: 'translate(-50%, -50%)'\n  }\n}))\n\nconst StyledModal = ({ name, children }) => {\n  const { current, close, loading, setLoading, error, setError } = useContext(\n    modalContext\n  )\n  const classes = useStyles()\n  const closeModal = () => {\n    setError(false)\n    setLoading(false)\n    close()\n  }\n  return (\n    <Modal open={current === name} onClose={closeModal}>\n      <div className={classes.paper}>\n        <p>{loading && 'LOADING...'}</p>\n        <p>{error && '!!!!ERROR!!!!'}</p>\n        {children}\n      </div>\n    </Modal>\n  )\n}\n\nexport default StyledModal\n","import { useState } from 'react'\n\nexport const useInput = initialValue => {\n  const [value, setValue] = useState(initialValue)\n  const bind = {\n    value,\n    onChange: e => setValue(e.target.value)\n  }\n  const reset = () => setValue('')\n  return [value, bind, reset]\n}\nexport default useInput\n","import React from 'react'\nimport StyledModal from '../StyledModal/StyledModal'\nimport { Button, TextField } from '@material-ui/core'\nimport useInput from '../../../hooks/useInput'\nimport useAuth from '../../../hooks/useAuth'\n\nconst SignUpModal = () => {\n  const { signUp } = useAuth()\n  const [email, bindEmail] = useInput('')\n  const [password, bindPassword] = useInput('')\n  const [passwordConfirmation, bindPasswordConfirmation] = useInput('')\n  const onSignUpClicked = () => {\n    signUp({ email, password, passwordConfirmation })\n  }\n  return (\n    <StyledModal name=\"SignUp\">\n      <form>\n        <TextField label=\"email\" {...bindEmail} />\n        <TextField label=\"password\" {...bindPassword} />\n        <TextField\n          label=\"password confirmation\"\n          {...bindPasswordConfirmation}\n        />\n        <Button onClick={onSignUpClicked}>Login</Button>\n      </form>\n    </StyledModal>\n  )\n}\n\nexport default SignUpModal\n","import React from 'react'\nimport StyledModal from '../StyledModal/StyledModal'\nimport { Button, TextField } from '@material-ui/core'\nimport useInput from '../../../hooks/useInput'\nimport useAuth from '../../../hooks/useAuth'\n\nconst SignInModal = () => {\n  const [email, bindEmail] = useInput('')\n  const [password, bindPassword] = useInput('')\n  const { signIn } = useAuth()\n  const onSignInClicked = () => {\n    signIn({ email, password })\n  }\n  return (\n    <StyledModal name=\"SignIn\">\n      <form>\n        <TextField label=\"email\" {...bindEmail} />\n        <TextField label=\"password\" {...bindPassword} />\n        <Button onClick={onSignInClicked}>Login</Button>\n      </form>\n    </StyledModal>\n  )\n}\n\nexport default SignInModal\n","import React from 'react'\nimport SignUpModal from './SignUpModal/SignUpModal'\nimport SignInModal from './SignIn/SignIn'\n\nconst Modals = () => {\n  return (\n    <>\n      <SignUpModal />\n      <SignInModal />\n    </>\n  )\n}\n\nexport default Modals\n","import React from 'react'\nimport Layout from './Layout/Layout'\nimport Story from './views/Story'\nimport Storys from './views/Storys'\nimport { Route, Switch } from 'react-router-dom'\nimport NotFound from './views/NotFound'\nimport Modals from './components/Modal/Modals'\nimport { CurrentStoryContextProvider } from './context/current-story-context'\n\nconst App = () => {\n  return (\n    <Layout>\n      <Modals />\n      <Switch>\n        <Route path=\"/404\">\n          <NotFound />\n        </Route>\n        <Route exact path=\"/stories\">\n          <Storys />\n        </Route>\n        <Route path=\"/stories/:id\">\n          <CurrentStoryContextProvider>\n            <Story />\n          </CurrentStoryContextProvider>\n        </Route>\n      </Switch>\n    </Layout>\n  )\n}\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import { createMuiTheme } from '@material-ui/core/styles'\n\nexport default createMuiTheme({\n  drawerWidth: 240\n})\n","import React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport App from './App'\nimport * as serviceWorker from './serviceWorker'\n\nimport { ModalContextProvider } from './context/modal-context'\nimport { UserContextProvider } from './context/user-context'\nimport { CssBaseline, ThemeProvider } from '@material-ui/core'\nimport theme from './theme'\nimport { BrowserRouter } from 'react-router-dom'\nimport { StorysContextProvider } from './context/storys-context'\n\nconst rootJsx = (\n  <UserContextProvider>\n    <ModalContextProvider>\n      <ThemeProvider theme={theme}>\n        <BrowserRouter basename=\"/fiction-client/\">\n          <StorysContextProvider>\n            <CssBaseline />\n            <App />\n          </StorysContextProvider>\n        </BrowserRouter>\n      </ThemeProvider>\n    </ModalContextProvider>\n  </UserContextProvider>\n)\n\nReactDOM.render(rootJsx, document.getElementById('root'))\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister()\n"],"sourceRoot":""}